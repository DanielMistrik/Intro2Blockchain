
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1.1. Chapter &#8212; An Introduction to the Blockchain</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../_static/logo.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1.2. Summary" href="summary.html" />
    <link rel="prev" title="1. Blockchain as a Data Structure" href="title.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">An Introduction to the Blockchain</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Introduction to the Blockchain
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Preface
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../preface/background.html">
   Background
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Basics
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="title.html">
   1. Blockchain as a Data Structure
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     1.1. Chapter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="summary.html">
     1.2. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="questions.html">
     1.3. Exercises
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="citations.html">
     1.4. Citations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../crypto/title.html">
   2. Cryptography
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../crypto/text.html">
     2.1. Chapter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../crypto/summary.html">
     2.2. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../crypto/questions.html">
     2.3. Exercises
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../crypto/citations.html">
     2.4. Citations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../networks/title.html">
   3. Networks
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../networks/text.html">
     3.1. Chapter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../networks/summary.html">
     3.2. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../networks/questions.html">
     3.3. Exercises
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../networks/citations.html">
     3.4. Citations
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Implementation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../bitcoin/title.html">
   4. Bitcoin
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../bitcoin/text.html">
     4.1. Chapter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../bitcoin/summary.html">
     4.2. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../bitcoin/questions.html">
     4.3. Exercises
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../bitcoin/citations.html">
     4.4. Citations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ethereum/title.html">
   5. Ethereum
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ethereum/text.html">
     5.1. Chapter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ethereum/summary.html">
     5.2. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ethereum/questions.html">
     5.3. Exercises
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ethereum/citations.html">
     5.4. Citations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../vulnerabilities/title.html">
   6. Vulnerabilities
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../vulnerabilities/text.html">
     6.1. Chapter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vulnerabilities/summary.html">
     6.2. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vulnerabilities/questions.html">
     6.3. Exercises
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vulnerabilities/citations.html">
     6.4. Citations
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  On top of Blockchain
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../layer2/title.html">
   7. Layer 2
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../layer2/text.html">
     7.1. Chapter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../layer2/summary.html">
     7.2. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../layer2/questions.html">
     7.3. Exercises
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../layer2/citations.html">
     7.4. Citations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../DeFi/title.html">
   8. DeFi
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../DeFi/text.html">
     8.1. Chapter
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/chapters/baad/text.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/DanielMistrik/Intro2Blockchain"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/DanielMistrik/Intro2Blockchain/issues/new?title=Issue%20on%20page%20%2Fchapters/baad/text.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-byzantine-generals-problem">
   1.1.1. The Byzantine General’s Problem
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#blockchain-as-a-solution">
   1.1.2. Blockchain as a solution
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#storing-the-data">
     1.1.2.1. Storing the Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conventional-methods">
     1.1.2.2. Conventional Methods
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#blockchain-implementation-bads">
     1.1.2.3. Blockchain Implementation (
     <em>
      BADS
     </em>
     )
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#maintaining-bads">
     1.1.2.4. Maintaining
     <em>
      BADS
     </em>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#implications-of-blockchain-being-a-solution">
   1.1.3. Implications of Blockchain being a solution
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="chapter">
<h1><span class="section-number">1.1. </span>Chapter<a class="headerlink" href="#chapter" title="Permalink to this headline">¶</a></h1>
<p>When talking about blockchain we are talking about a system.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>What is a system? <a class="reference external" href="https://www.merriam-webster.com/dictionary/system">Merriam-Webster</a>
defines <em>system</em> as “interacting or interdependent group of
items forming a unified group”. This isn’t the best, or most
concrete, definition so for this textbook we define system sa <em>a
group of computers, nodes, trying to work on a singular application.</em>
This singular application can be as big or as small as it wants.</p>
</div>
<p>System architecture is a whole course in itself, at
Cornell its <a class="reference external" href="https://cornellcswiki.gitlab.io/classes/CS4410.html">CS4410</a>,
so we will not be going into any sort of depth on the topic.
All we need to know that systems can be structured in three basic
ways:</p>
<ul class="simple">
<li><p><strong>Centralized</strong>: The whole network revolves and depends on
a ‘leader’ node (i.e. Facebook).</p></li>
<li><p><strong>Decentralized</strong>: The whole network revolves and depends on
a <em>group</em> of ‘leader’ nodes (i.e. Tor).</p></li>
<li><p><strong>Distributed</strong>: A network composed of equal <em>peer</em> nodes
that are variously connected between each other. There is no
‘leader’ node (i.e. I.o.T).</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The definitions of decentralized and distributed are often
used interchangeably. You might find blockchain being called
distributed on website and decentralized on the next. Formally
the two terms are different but for 95% of sources on the
blockchain, including this textbook, they mean the same thing
which is that the system isn’t centralized.</p>
</div>
<p>The three types all have their uses and there is no one type
that is better overall. Saying this we have to concede that
an overwhelming majority of consumer-facing applications are
built on centralized systems.</p>
<p>Why? Centralized systems are easy to control and run, so they
are often the first choice for already centralized companies.
But centralized systems aren’t perfect.</p>
<ul class="simple">
<li><p>Centralized systems are fragile in that if the ‘leader’ node
falls so those the whole system.</p></li>
<li><p>Censorship is far easier to implement on a centralized system
than on one of the others.</p></li>
<li><p>Centralized systems have limited privacy.</p></li>
</ul>
<p>A good example of how centralized systems can go wrong was <a class="reference external" href="https://blog.cloudflare.com/october-2021-facebook-outage/">Facebook’s
2021 outage caused by a maintenance failure on their centralized servers</a>.</p>
<p>Distributed and decentralized systems largely address the above,
so we might think they are the solution. But they, too, have problems.
A <em>Byzantine</em> problem.</p>
<div class="section" id="the-byzantine-generals-problem">
<h2><span class="section-number">1.1.1. </span>The Byzantine General’s Problem<a class="headerlink" href="#the-byzantine-generals-problem" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../../_images/Byzantine_Generals.png"><img alt="../../_images/Byzantine_Generals.png" class="align-right" src="../../_images/Byzantine_Generals.png" style="width: 200px; height: 200px;" /></a>
<p>Formally, the Byzantine General’s Problem (<em>BGP</em>) is a <em>game theory</em> problem
plaguing distributed systems. The problem goes as follows:</p>
<p>A group of generals besieged the city of Byzantium. To take the
city they have to attack all at once BUT:</p>
<ul class="simple">
<li><p>The Generals have unreliable messengers who might have been
infiltrated by Byzantium.</p></li>
<li><p>Some generals may be traitors.</p></li>
</ul>
<p>There are many adaptations of this problem but the issue is the
same: How do you work with a group of peers you don’t trust
and communication between you is unreliable.</p>
<p>This problem affects distributed systems because of the equality of nodes.
There is no gatekeeper, anyone can join the system and communicate
with whom ever they want. This means your peers may be malicious
actors trying to subvert the system, or they may be honest nodes that
just have very bad internet, so they get only some of the
critical messages needed to support the system.</p>
<p>Although <em>BGP</em> is at heart a theoretical problem it has
a number of real-world applications. These include:</p>
<ul class="simple">
<li><p>Communication between nuclear submarines</p></li>
<li><p>An international team of developers trying to build
a product (i.e. Whatsapp)</p></li>
<li><p>The Internet</p></li>
</ul>
<p>One of the largest distributed/decentralized systems is after all
the internet. Anyone can host a website and anyone can
visit and this made managing payments very hard. Some websites
use credit cards, but these can be misused by malicious websites,
while others just trusted the customer would pay when the product would
physically be delivered. In short <em>BGP</em> meant there was no clean
solution to online payments.</p>
</div>
<div class="section" id="blockchain-as-a-solution">
<h2><span class="section-number">1.1.2. </span>Blockchain as a solution<a class="headerlink" href="#blockchain-as-a-solution" title="Permalink to this headline">¶</a></h2>
<p>On Halloween in 2008 a solution to the payment problem was announced
under the whitepaper <em>Bitcoin: A peer-to-peer electronic cash system</em>.
Although the author never used the term, the whitepaper created <em>Blockchain</em>, a
technology and data-structure that solved <em>BGP</em>.</p>
<div class="section" id="storing-the-data">
<h3><span class="section-number">1.1.2.1. </span>Storing the Data<a class="headerlink" href="#storing-the-data" title="Permalink to this headline">¶</a></h3>
<p>The remainder of this chapter will be looking at a
subset of the solution: storing the information the
generals send each other. The following two chapters
will complete the solution.</p>
<p>We need a <em>data-structure</em> that can store information
among a <em>trustless</em> system. This data-structure
needs to address the following:</p>
<ul class="simple">
<li><p>How the actual data will be structured.</p></li>
<li><p>How will data be added/edited.</p></li>
<li><p>How will we make sure the data is valid.</p></li>
<li><p>How will we make sure everyone has the same set of data.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By <em>trustless</em> we don’t mean a system with 0 trust but rather a system you can
trust even if you don’t trust the participants. This might seem paradoxical but
its actually one of the wonders of the blockchain and in this chapter we will take
a peak into how this is possible.</p>
</div>
</div>
<div class="section" id="conventional-methods">
<h3><span class="section-number">1.1.2.2. </span>Conventional Methods<a class="headerlink" href="#conventional-methods" title="Permalink to this headline">¶</a></h3>
<p>Traditionally, when we want to store big sets of data we look at databases.
<a class="reference external" href="https://www.oracle.com/database/what-is-database/#:~:text=A%20database%20is%20an%20organized,database%20management%20system%20(DBMS).&amp;text=Most%20databases%20use%20structured%20query,for%20writing%20and%20querying%20data.">Databases</a>
are an organized collection of data often arranged into a set of tables. To
look whether we can use purely databases lets try to answer our 4 questions with
databases:</p>
<ul class="simple">
<li><p><strong>How will the data be structured?</strong> - In groups of inter-related tables.</p></li>
<li><p><strong>Adding/editing the data?</strong> - As we are working with a distributed system which
anyone can join the answer is anyone can add and edit data.</p></li>
<li><p><strong>Validity of data?</strong> - As anyone can add/edit data we don’t really have a way
to efficiently check if the data is correct.</p></li>
<li><p><strong>Same version of data?</strong> - We have to centralize the system to the same copy
of the database for everyone, a <a class="reference external" href="https://www.techopedia.com/definition/25146/programming-concurrency">concurrency</a>
nightmare not to mention that it stops being a decentralized system. There is
really no other solution inherent to databases.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We intentionally put <em>purely</em> databases above. This is because databases are
in many ways an inherent way to store data and many blockchain implementations
do actually store their local version of the blockchain in a database. The above was
meant to showcase that we can’t only depend on conventional methods, that is
we need something extra, something new.</p>
</div>
<p>Clearly using <em>just</em> databases isn’t enough. Not having a gatekeeper is looking like a
problem. By going over the questions we realize that conventional methods don’t quite
cut it. Our ideal data-structure would have the following properties:</p>
<ul class="simple">
<li><p>Is ordered.</p></li>
<li><p>Has clear rules on who and how data is added.</p></li>
<li><p>Data present in the structure can be easily verified by anyone</p></li>
<li><p>Is <em>immutable</em>, that is once data is added it can’t be deleted or edited.</p></li>
<li><p>Can be shared easily among nodes in the system.</p></li>
<li><p>Anyone can contribute to it but can only submit valid data.</p></li>
</ul>
</div>
<div class="section" id="blockchain-implementation-bads">
<h3><span class="section-number">1.1.2.3. </span>Blockchain Implementation (<em>BADS</em>)<a class="headerlink" href="#blockchain-implementation-bads" title="Permalink to this headline">¶</a></h3>
<p>The blockchain meets the requirements above through the following data-structure:</p>
<ul class="simple">
<li><p>Data is ordered into <em>blocks</em> and structured by <em>Merkle Trees</em>.</p></li>
<li><p><em>Blocks</em> are united through a <em>linked list</em>.</p></li>
<li><p><em>Blocks</em> are added on a regular basis to the <em>linked list</em> and must be valid to
be added.</p></li>
<li><p>Everyone has an identical version of the above and can propose new <em>blocks</em> that
should be added.</p></li>
</ul>
<p>This composite data structure is the Blockchain-as-a-data-structure (<em>BADS</em>)</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We just used alot of new definitions like linked lists, merkle trees and blocks.
If this looks overwhelming don’t worry we will cover all of them in the rest of
the chapter. Once you read what all of these terms mean it could be useful to go over
the above again.</p>
</div>
<p><strong>Linked Lists</strong> are pieces of data that <em>point</em> to each other forming a chain.
They are an incredibly important data structure in all of computer science, as
anyone who has taken Cornell’s <a class="reference external" href="https://cornellcswiki.gitlab.io/classes/CS2110.html">CS2110</a> or ever prepared for an S.W.E interview knows.
A piece of data, also called a node but not to be confused with nodes in a system,
either point to another node or to nothing, but importantly they can only point to <strong>one</strong>
other thing and is pointed to by a maximum of one other node. This means two nodes cannot
point to the same node.</p>
<p>They have the following benefits:</p>
<ul class="simple">
<li><p>Clear process to add data, you just point your new data to the most recent data already
in the linked list.</p></li>
<li><p>Immutable. To replace one node is to replace all the nodes that point to it either
directly or indirectly.</p></li>
</ul>
<p>As such linked lists have solved several of our desired B.A.D.S qualities. Namely
<em>An ordered data structure</em>,<em>Clear process to add data</em>,<em>Immutable</em>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Linked Lists, in their basic form, have ‘soft’ immutability. By this we mean it is
a nuisance to delete data, but it can still be done, editing is unaffected. But,
as we will see, Blockchain’s linked list has ‘strong’ immutability. By principle, Blockchain
linked lists are add-only, so if you are to act honestly you will only every add nodes,
not edit or replace them.</p>
</div>
<img alt="../../_images/Linked_Lists.png" src="../../_images/Linked_Lists.png" />
<p><strong>Blocks</strong> are the nodes in <em>BADS</em>’s linked list. Blocks are composed of a header and
data. The data the block contains must be validated by the data in preceding blocks.
Blocks point to each other by storing the <em>hash</em>, a sort of data signature, of the
previous block, there is no ‘physical’ link between the nodes.</p>
<p>Blocks and the linked list give the technology its name as: <strong>Block + Chain</strong>.</p>
<p>The former part coming from nodes and the latter part coming from the fact that
linked lists ‘chain’ data together. We explored the expanding tail of the blockchain
linked list but what about its head? What is the ‘first’ block and what does it point
to? In blockchain, we call this block the <em>genesis block</em>.</p>
<p><strong>Genesis Block</strong> is the oldest block in the linked list and the only one that points to
nothing. It comes <em>hard-coded</em> in most blockchain implementations and is the only
block that is inherently true. This means our trust in the blockchain is partly
based on our trust that the data in the genesis block is valid. Genesis blocks often
dont contain alot of information and are often used for grand statements, like Bitcoin’s
was.</p>
<blockquote class="epigraph">
<div><p>The Times 03/Jan/2009 Chancellor on brink of second bailout for banks
– Bitcoin Genesis Block</p>
</div></blockquote>
<p>Blocks and the linked list address another desired characteristic of BADS: <em>sharing
the data structure is efficient</em>. This is because to update the data structure we only
need to share the latest block, each node can then add this block to their own private
and much larger blockchain. The initial blockchain ‘download’ is still slow, but now it
only has to be done once. We still need to guarantee that every node gets the same
block and that it is in the correct order. This is called reaching <em>consensus</em> and
Blockchain achieves it through several <em>consensus algorithms</em> like <em>PoW</em> or <em>PoS</em>.</p>
<p>Above we often mentioned that data in a block has to <em>valid</em> and that only the genesis block
has the luxury of being automatically correct. But what does this actually mean?</p>
<p>For those who have done some discrete math, i.e. have done Cornell’s
<a class="reference external" href="https://cornellcswiki.gitlab.io/classes/CS2800.html">CS2800</a>, this process is similar to
induction where the genesis block is the <em>base case</em> and adding blocks is the <em>inductive case</em>.</p>
<p>For those who haven’t done any discrete math we can look at it as follows:</p>
<ul class="simple">
<li><p>The data cannot be proven incorrect by the data in preceding blocks.</p></li>
<li><p>The data must have the same structure as data in the preceding blocks.</p></li>
</ul>
<p>The above is only a generalization as the exact definition of what it means to be <em>correct</em>
depends on blockchain.</p>
<div class="tip admonition">
<p class="admonition-title">Example</p>
<p>Lets look at a theoretical blockchain that tracks how much legos you own.</p>
<ul class="simple">
<li><p>The genesis block says you have 1 lego</p></li>
<li><p>The block after genesis says you lost 1 lego</p></li>
<li><p>If any block after that says you lost more legos the data in that block is invalid
as you can’t have less than 0 blocks.</p></li>
</ul>
</div>
<p>We now have a way to organize data, a block chain, but how do we organize data within
blocks? This is an important question as we need to guarantee the following:</p>
<ul class="simple">
<li><p>The data must be clearly ordered so different nodes can have the same version</p></li>
<li><p>The data has to have a ‘signature’ that we can use to quickly check it’s the same as
the data of other nodes</p></li>
<li><p>The data has to be immutable</p></li>
<li><p>We need to guarantee that data is unaltered when it is sent from one node to another,
this is to protect against unreliable or malicious communication channels.</p></li>
</ul>
<p>Using purely a database would introduce a smaller version of our original problem
and a linked list would be too complicated. Fortunately we have a data structure that
addresses all of our demands, a <em>Merkle Tree</em>.</p>
<div class="admonition-on-trees admonition">
<p class="admonition-title">On Trees</p>
<p><em>Merkle Trees</em> are a type of <em>tree</em>. Trees are an incredibly useful and widespread CS
data structure and their use cases go far beyond blockchain. Although we will not cover
trees in depth we need to understand their basic architecture and some key terminology.
Trees work much like linked lists in that they are composed of nodes pointing to other
nodes. But in the case of trees multiple nodes, the <em>children</em> can point to the same node,
the <em>parent</em>. Nodes that have no children are called <em>leaves</em>. If we plot this relationship it looks like a tree, hence the name. Binary
trees are trees where every parent can have at most 2 children, this means a node can be
pointed to by a maximum of two other nodes.</p>
</div>
<a class="reference internal image-reference" href="../../_images/Merkle_T.png"><img alt="../../_images/Merkle_T.png" class="align-right" src="../../_images/Merkle_T.png" style="width: 200px; height: 150px;" /></a>
<p><strong>Merkle Tree</strong> is a binary tree where every node has a hash, digital signature, which
is the hash of the hashes of its two children. The actual data is stored in <em>leaves</em>
whose hash makes up the first layer of nodes that eventually connect to the Merkle <em>root</em>
which is a unique digital signature of the whole set of data. This digital signature
has a given size, but it can represent a data set of infinite size. We cannot understate
the importance of this data structure in blockchain. It appears everywhere in nearly
every implementation and add-on, after <em>BADS</em> Merkle Trees are the data structure of the blockchain.</p>
<p>Merkle Trees largely rely on <em>hashes</em> which, in a simplified sense, are a unique
fixed-size signature of the data provided. The idea that every piece of data,
be it an image or just a combination of other hashes, has a unique representation is
what gives Merkle Trees their power. Hashing is a fascinating and integral part of
blockchain and cryptography in general, and we will cover it in depth in the next chapter.</p>
<p>Merkle Trees have multiple benefits and features that address our desires for storing
concrete data:</p>
<ul class="simple">
<li><p>Thanks to the merkle root we can quickly determine whether two sets of data, perhaps
stored by two different nodes with unreliable connections, are <em>exactly</em> the same,
in both structure and content.</p></li>
<li><p>The merkle root also makes it very easy to see if anyone edited the data as the
root would change, and it is very difficult, to impossible, to keep the changed data but
revert the root back to its old version. This makes merkle trees immutable.</p></li>
<li><p>Changing a single piece of data means the whole merkle tree becomes invalid and to
make it work again you need to recalculate all the hashes to get a new valid root.</p></li>
<li><p>The merkle root acts as a signature of the data provided so, in some cases, rather
than send all the data we just send the much smaller merkle root.</p></li>
</ul>
<p>Data within blocks is therefore stored in merkle trees, and we can represent this
data through a small fixed-sized merkle root that is, almost, guaranteed to be unique.</p>
<p>We talked alot about the data stored by the block but are still missing its ‘brain’,
the part that references the preceding block and contains information about the block
, like the merkle root. The blocks ‘brain’ is the <em>block header</em>.</p>
<p><strong>Block Header</strong> defines the block’s properties. Every blockchain implementation has
a unique header structure. Regardless a, very generalized, block header contains the
following:</p>
<ul class="simple">
<li><p><strong>Version</strong> - The version of the blockchain implementation when the block was added. Like all software
blockchain implementation has updates and so different versions that can affect how we
determine whether a block is valid.</p></li>
<li><p><strong>Preceding Block Hash</strong> - The hash of the latest block before this one. This creates
the linked list.</p></li>
<li><p><strong>Merkle Root of Data</strong> - The root of the merkle tree storing all the block’s data.
This is very useful as a node can quickly determine whether its local version of the
data is valid.</p></li>
<li><p><strong>Timestamp</strong> - The timestamp of when the block was added to the blockchain.</p></li>
</ul>
<p>All the fields of the block header are filled out by the creator of the block. This
concludes our discussion of the core <em>BADS</em>. A linked list composed of blocks as nodes
which store concrete data into merkle trees and are coordinated by their headers.</p>
<p>We now know how to build a blockchain as a data structure, but we don’t know to run it.
The discussion above has left us with questions like who adds and validates blocks
and how is ‘strong’ immutability implemented into <em>BADS</em>.</p>
</div>
<div class="section" id="maintaining-bads">
<h3><span class="section-number">1.1.2.4. </span>Maintaining <em>BADS</em><a class="headerlink" href="#maintaining-bads" title="Permalink to this headline">¶</a></h3>
<p>Let’s start with adding and validating blocks and tackle immutability later. Adding
and validating blocks forces us to introduce another aspect of Blockchain, <em>networks</em>.</p>
<p><a class="reference external" href="https://www.computerhope.com/jargon/n/network.htm#:~:text=A%20network%20is%20a%20collection,people%20all%20over%20the%20world."><em>Networks</em></a>
are in the most simple sense just a set of connected computers that share data. Systems
work on top of networks. Blockchain in particular is heavily dependent on networks as
a distributed system, and we will be devoting a whole chapter to them.</p>
<p>For now blockchain can be considered as a network where <em>BADS</em> is the data shared. To determine
who adds and validates blocks is to decide which nodes add and which nodes validate the
data they all share. This is still a distributed system, so we somehow need every node
to independently, but identically, agree on which block will be added. This is called
achieving <em>consensus</em> and is the responsibility of <em>consensus algorithms</em>, which we will
cover in detail in the following chapters.</p>
<p>There is broad range of consensus algorithms and there is still active research invested
in them. Consensus algorithms can have very diverse implementations so the following
generalization does not necessarily apply to all of them.</p>
<p>A generalized, but heavily inspired by PoW and original implementations of PoS, consensus
algorithm requires that all nodes store <em>BADS</em> and actively participate in trying to
add a block or validate a candidate. The general process for a node goes as follows:</p>
<ol class="simple">
<li><p>A node collects, and verifies, data to put into its block, fills out its block header and then
tries to validate it. This validation goes beyond the validity of the data and is the
main point where consensus algorithms converge. Validation is always meant to take
some noticeable amount of time so the network isn’t flooded with candidate blocks.</p></li>
<li><ol class="simple">
<li><p>The node successfully validates its block at which point it broadcasts its candidate
block to the rest of the network.</p></li>
<li><p>Before the node can validate its own block another candidate block comes in.
At this point the node stops working on its own block and checks if the candidate
is valid. In the case it is the node abandons its attempt, adds the candidate to
its own blockchain and tries to create the block that follows it.</p></li>
</ol>
</li>
</ol>
<p>Achieving consensus therefore happens at an individual level for every node, but it happens
simultaneously. As what makes a block valid is known to the whole network, via the
consensus algorithm, every block can individually determine whether a block is valid,
and it expresses its consent by adding it to its own local blockchain. When this happens
at a majority of nodes we consider the block to be successfully added to the blockchain.</p>
<p>But what about immutability? Can’t someone just produce a new set of valid blocks that
replace existing blocks and then publish them to the network that accepts them? In
theory yes but the likelihood of something like this happening is very low. We
first must understand that at anyone time there may be multiple competing chains
and the <em>valid</em> chain is the one that is the biggest/longest. This is
because creating, a broadcasting, a valid block is a time race and so as long as a
majority of nodes are honest, and accept that blockchain is add-only, the attackers
won’t be able to catch up with the longer, valid, chain that the honest nodes add onto.</p>
<p>Maintaining <em>BADS</em> is difficult to comprehend. There is no one copy of <em>BADS</em> as every
node stores its own. The ‘current’ version of <em>BADS</em> can be understood as the version
a majority of nodes currently store. This brings in the concept of ‘identicalness
as a requirement’ where consensus algorithms guarantee every node has the same version
of <em>BADS</em>. This requirement also essentially makes <em>BADS</em> impossible to destroy as to
do it one would have to destroy the local version of every node.</p>
<div class="admonition-an-honest-majority admonition">
<p class="admonition-title">An honest majority</p>
<p>Above we based alot of <em>BADS</em> maintenance on the idea that a majority of nodes are
honest. This might seem like a design flaw, but it is one of the central assumptions
of a valid blockchain. As we will discover later in the course this assumption holds
for the most part but there have been cases when it hasn’t with tragic results.</p>
</div>
</div>
</div>
<div class="section" id="implications-of-blockchain-being-a-solution">
<h2><span class="section-number">1.1.3. </span>Implications of Blockchain being a solution<a class="headerlink" href="#implications-of-blockchain-being-a-solution" title="Permalink to this headline">¶</a></h2>
<p>Coming back to <em>BGP</em> we now have a solution on the format of the messages that the
generals send to each other. The messages are put in a blockchain, the genesis block
can contain none or some very basic information they all agree on like how many generals there are,
and each general has a local version. Generals don’t need to trust the messengers, as
a malicious message would not be supported by previous data in the blockchain, or
other generals. They only need to trust the system and that a majority of the generals
are honest, so they will always control the valid chain and so only exchange valid
messages.</p>
<p>This solution has an important implication, the concept that we can trust
the system rather than any particular participant in it. We trust the blockchain, we
don’t need to trust any individual node/general/website. This is partially achieved
by every node verifying everything on its own and trusting no particular block/data
sent to it.</p>
<p>From our discussion above we can determine several benefits of <em>BADS</em>:</p>
<ul class="simple">
<li><p><strong>Censorship-Resistant</strong> - Anyone can join a distributed system.</p></li>
<li><p><strong>Very stable</strong> - For <em>BADS</em> to disappear every node has to delete its local version
of it, a very unlikely event.</p></li>
<li><p><strong>Works well over a unstable connection</strong> - With Merkle Trees and immediate verification
upon receiving, data that is kept is guaranteed to be what the sender intended it to be.</p></li>
<li><p><strong>Verification is conducted individually so there is no need to trust any individual participant</strong></p></li>
</ul>
<p>There are however also drawbacks to <em>BADS</em>:</p>
<ul class="simple">
<li><p><strong>Inefficient by design</strong> - Every participant has to store the exact same version
of the blockchain which from a storage standpoint, is as inefficient as it gets.</p></li>
<li><p><strong>Limited Data</strong> - Although we haven’t delved into this just yet, the verification
of data is difficult and so a blockchain is often limited to only one type of data it
can store.</p></li>
<li><p><strong>Dishonest Majority</strong> - There is always the small possibility that a majority of the
nodes are dishonest in which case our concept of a valid blockchain collapses.</p></li>
<li><p><strong>Blockchain Bugs</strong> - Because of how blockchains are implemented, if there is a bug
it is, like the data, immutable. We will cover this in detail in a later chapter.</p></li>
</ul>
<p>This doesn’t mean <em>BADS</em> is inherently flawed, it just goes to show that <em>BADS</em> isn’t
a universal solution to everything. Like databases and centralized systems, blockchain
has use-cases it’s useful for and use-cases it’s not.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>One of the reasons why we introduced you to blockchain through Byzantine Generals is
because we want to address a common misconception: blockchain isn’t only finance. Although
Bitcoin and DeFi are successful financial applications of the blockchain they aren’t
its only applications.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters\baad"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="title.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">1. </span>Blockchain as a Data Structure</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="summary.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">1.2. </span>Summary</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Daniel Mistrik & Cornell Blockchain<br/>
        
            &copy; Copyright 2022.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>